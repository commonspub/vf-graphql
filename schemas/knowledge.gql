##
#
# Knowledge layer
#
# Provides functionality for classifying and organising other parts of the system, including recipes.
#
# :TODO: need to figure out a way of making these enums extensible while
#        still validating implementations
#
##


"""
An action verb defining the kind of event, commitment, or intent.
It is recommended that the lowercase action verb should be used as the record ID
in order that references to `Action`s elsewhere in the system are easily readable.
"""
type Action {
  id: ID!
  name: String!
  resourceEffect: String! # "+", "-", "0"
}

# Core VF action IDs & `resourceEffect`s:
#   unload    (+)
#   load      (-)
#   consume   (-)
#   use       (0)
#   work      (0)
#   cite      (0)
#   produce   (+)
#   accept    (0)
#   improve   (0)
#   give      (-)
#   receive   (+)
#   raise     (+)
#   lower     (-)

"""
Specification of a kind of resource. Could define a material item, service, digital item, currency account, etc.
Used instead of a classification when more information is needed, particularly for recipes.
"""
type ResourceSpecification {
  id: ID!
  name: String!

  "The unit expected for this resource specification as a default."
  unit: Unit

  "Defines if any resource of that type can be freely substituted for any other resource of that type when used, consumed, traded, etc."
  substitutable: Boolean

  image: URL

  note: String

  "References a concept in a common taxonomy or other classification scheme for purposes of categorization."
  resourceClassifiedAs: [URL]

  ##############################################################################
  # inverse relationships and queries

  conformingResources: [EconomicResource]
}

"""
Specifies the process part of a recipe for use in planning from recipe.
"""
type RecipeProcess {
  id: ID!
  name: String!
  note: String

  "Grouping around something to create a boundary or context, used for documenting, accounting, planning."
  inScopeOf: Agent

  hasDuration: DateInterval

  "The multiplier for duration based on capacities for the recipe."
  durationMultiplier: Float

  "References a concept in a common taxonomy or other classification scheme for purposes of categorization."
  processClassifiedAs: [URL]
}

"""
The linkage between a recipe process, an action that structures a recipe, and a resource specification.
"""
type RecipeFlow {
  id: ID!
  note: String
  quantifiedAs: QuantityValue

  "The primary resource knowledge specification or definition of an existing or potential resource."
  resourceConformsTo: ResourceSpecification

  "References a concept in a common taxonomy or other classification scheme for purposes of categorization."
  resourceClassifiedAs: [URL]

  "Relates a process input or output to a verb, such as consume, produce, work, improve, etc."
  action: Action!

  "Relates an input flow to it's node in a recipe."
  recipeInputOf: RecipeProcess

  "Relates an output flow to it's node in a recipe."
  recipeOutputOf: RecipeProcess
}
